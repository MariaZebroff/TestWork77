(()=>{"use strict";const t=cityData.root_url;let e,n=!1;const r=(t,n)=>function(...r){clearTimeout(e),e=setTimeout((()=>t.apply(this,r)),n)},o=t=>{const e=document.querySelector("#cities-table-body");e.innerHTML="",console.log("DATA FROM FUNCTION",t),0!==t.length?t.forEach((t=>{const n=document.createElement("tr");n.innerHTML=`\n            <td>${t.city}</td>\n            <td>${t.country}</td>\n            <td>${t.temperature}</td>\n        `,e.appendChild(n)})):e.innerHTML="<tr><td colspan='3'>No cities found.</td></tr>"},c=()=>{document.querySelector("#cities-table-body").innerHTML="<tr id='loader'><td colspan='3'>Data Loading...</td></tr>"},a=async()=>{if(!n){c();try{const e=await fetch(`${t}/wp-json/cities/v1/search`);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const r=await e.json();o(r),n=!0}catch(t){console.error("Error fetching city data:",t)}}},i=async()=>{const e=document.getElementById("city-search").value.trim();if(e){c();try{const n=await fetch(`${t}/wp-json/cities/v1/search?term=${e}`);if(404===n.status)return void o([]);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);const r=await n.json();o(r)}catch(t){console.error("Error fetching city data:",t)}}};document.addEventListener("DOMContentLoaded",(async function(){const t=document.getElementById("city-search"),e=document.getElementById("reset");a(),e.addEventListener("click",(()=>{n=!1,t.value="",a()})),t.addEventListener("input",r(i,300))}))})();